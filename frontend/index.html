<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EMS — Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:wght@300;400;500&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>

  <!-- SIDEBAR -->
  <div class="sidebar">
    <a href="home.html" class="sidebar-logo">
      <div class="sidebar-logo-icon">
        <i class="fa-solid fa-building-columns"></i>
      </div>
      <div class="sidebar-logo-text">
        EMS Portal
        <span class="sidebar-logo-sub">ENTERPRISE v2.0</span>
      </div>
    </a>

    <div class="sidebar-section-label">Navigation</div>

    <nav class="sidebar-nav">
      <a href="#" class="nav-item active" onclick="showSection('dashboard', this)">
        <div class="nav-icon"><i class="fa-solid fa-gauge"></i></div>
        Dashboard
      </a>
      <a href="#" class="nav-item" onclick="showSection('add-employee', this)">
        <div class="nav-icon"><i class="fa-solid fa-user-plus"></i></div>
        Add Employee
      </a>
      <a href="#" class="nav-item" onclick="showSection('all-employees', this)">
        <div class="nav-icon"><i class="fa-solid fa-users"></i></div>
        All Employees
      </a>
    </nav>

    <div class="sidebar-bottom">
      <div class="sidebar-user">
        <div class="sidebar-avatar" id="company-initial">?</div>
        <div class="sidebar-user-info">
          <div class="sidebar-user-name" id="company-name">Loading...</div>
          <div class="sidebar-user-role">ADMIN ACCESS</div>
        </div>
      </div>
      <button onclick="logout()" style="
        margin-top:10px;
        width:100%;
        padding:9px;
        background:rgba(240,80,110,0.08);
        border:1px solid rgba(240,80,110,0.2);
        border-radius:8px;
        color:#f0506e;
        font-family:'Syne',sans-serif;
        font-size:0.8rem;
        font-weight:600;
        cursor:pointer;
        display:flex;
        align-items:center;
        justify-content:center;
        gap:8px;
        transition:all 0.2s ease;
      " onmouseover="this.style.background='rgba(240,80,110,0.15)'"
         onmouseout="this.style.background='rgba(240,80,110,0.08)'">
        <i class="fa-solid fa-right-from-bracket"></i>
        Sign Out
      </button>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main-content">

    <!-- TOPBAR -->
    <div class="topbar">
      <div class="topbar-left">
        <div class="topbar-breadcrumb">EMS / <span id="topbar-breadcrumb-page">DASHBOARD</span></div>
        <div class="topbar-divider"></div>
        <div class="topbar-title" id="page-title">Dashboard</div>
      </div>
      <div class="topbar-right">
        <div class="topbar-status">
          <div class="status-dot"></div>
          LIVE
        </div>
        <a href="home.html" class="topbar-icon-btn" title="Home">
          <i class="fa-solid fa-house"></i>
        </a>
        <div class="topbar-icon-btn" title="Refresh" onclick="refreshPage()">
          <i class="fa-solid fa-rotate-right"></i>
        </div>
        <div class="topbar-avatar">HR</div>
      </div>
    </div>

    <!-- DASHBOARD SECTION -->
    <section id="dashboard" class="section active">

      <!-- STAT CARDS -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon"><i class="fa-solid fa-users"></i></div>
          <div class="stat-info">
            <span class="stat-number" id="total-employees">—</span>
            <span class="stat-label">Total Employees</span>
          </div>
          <div class="stat-delta">ALL</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fa-solid fa-user-check"></i></div>
          <div class="stat-info">
            <span class="stat-number" id="active-employees">—</span>
            <span class="stat-label">Active</span>
          </div>
          <div class="stat-delta" style="background:rgba(45,212,160,0.1);color:#2dd4a0;border-color:rgba(45,212,160,0.2);">ON</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fa-solid fa-building"></i></div>
          <div class="stat-info">
            <span class="stat-number" id="total-departments">—</span>
            <span class="stat-label">Departments</span>
          </div>
          <div class="stat-delta">DEPT</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fa-solid fa-file-contract"></i></div>
          <div class="stat-info">
            <span class="stat-number" id="contract-employees">—</span>
            <span class="stat-label">Contract Staff</span>
          </div>
          <div class="stat-delta">CTR</div>
        </div>
      </div>

      <!-- DASHBOARD GRID -->
      <div class="dashboard-grid">

        <!-- RECENT TABLE -->
        <div class="recent-section">
          <div class="section-header">
            <div class="section-header-left">
              <span class="section-eyebrow">Latest Records</span>
              <h2>Recent Employees</h2>
            </div>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>EMP ID</th>
                  <th>Full Name</th>
                  <th>Department</th>
                  <th>Designation</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="recent-tbody">
                <tr><td colspan="5" class="empty-state"><i class="fa-solid fa-spinner fa-spin"></i><p>Loading...</p></td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SIDE PANEL -->
        <div class="side-panel">

          <!-- DEPT BREAKDOWN -->
          <div class="panel-card">
            <div class="panel-title">
              <i class="fa-solid fa-chart-bar"></i>
              Department Breakdown
            </div>
            <div id="dept-bars">
              <div class="empty-state" style="padding:16px;"><i class="fa-solid fa-spinner fa-spin" style="font-size:1rem;"></i></div>
            </div>
          </div>

          <!-- QUICK STATS -->
          <div class="panel-card">
            <div class="panel-title">
              <i class="fa-solid fa-bolt"></i>
              Quick Stats
            </div>
            <div class="quick-stat">
              <span class="quick-stat-label">Full-time</span>
              <span class="quick-stat-val" id="qs-fulltime">—</span>
            </div>
            <div class="quick-stat">
              <span class="quick-stat-label">Part-time</span>
              <span class="quick-stat-val" id="qs-parttime">—</span>
            </div>
            <div class="quick-stat">
              <span class="quick-stat-label">Contract</span>
              <span class="quick-stat-val" id="qs-contract">—</span>
            </div>
            <div class="quick-stat">
              <span class="quick-stat-label">Inactive</span>
              <span class="quick-stat-val" id="qs-inactive" style="color:var(--danger);">—</span>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- ADD EMPLOYEE SECTION -->
    <section id="add-employee" class="section">
      <div class="form-card">
        <div class="form-card-header">
          <h2>Register New Employee</h2>
          <p>Complete all fields to onboard a new team member. Employee ID is auto-generated.</p>
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" id="fullName" placeholder="e.g. Rahul Sharma"/>
          </div>
          <div class="form-group">
            <label>Email Address</label>
            <input type="email" id="email" placeholder="name@company.com"/>
          </div>
          <div class="form-group">
            <label>Phone Number</label>
            <input type="text" id="phoneNumber" placeholder="10-digit number"/>
          </div>
          <div class="form-group">
            <label>Department</label>
            <input type="text" id="department" placeholder="e.g. Engineering"/>
          </div>
          <div class="form-group">
            <label>Designation</label>
            <input type="text" id="designation" placeholder="e.g. Software Engineer"/>
          </div>
          <div class="form-group">
            <label>Salary (₹)</label>
            <input type="number" id="salary" placeholder="e.g. 75000"/>
          </div>
          <div class="form-group">
            <label>Date of Joining</label>
            <input type="date" id="dateOfJoining"/>
          </div>
          <div class="form-group">
            <label>Employment Type</label>
            <select id="employmentType">
              <option value="">— Select Type —</option>
              <option value="Full-time">Full-time</option>
              <option value="Part-time">Part-time</option>
              <option value="Contract">Contract</option>
            </select>
          </div>
          <div class="form-group">
            <label>Status</label>
            <select id="status">
              <option value="Active">Active</option>
              <option value="Inactive">Inactive</option>
            </select>
          </div>
        </div>
        <div class="form-actions">
          <button class="btn-primary" onclick="addEmployee()">
            <i class="fa-solid fa-plus"></i> Add Employee
          </button>
          <button class="btn-secondary" onclick="clearForm()">
            <i class="fa-solid fa-rotate-left"></i> Clear
          </button>
        </div>
        <div id="form-message" class="form-message"></div>
      </div>
    </section>

    <!-- ALL EMPLOYEES SECTION -->
    <section id="all-employees" class="section">
      <div class="section-header">
        <div class="section-header-left">
          <span class="section-eyebrow">Directory</span>
          <h2>All Employees</h2>
        </div>
        <div class="search-bar">
          <i class="fa-solid fa-magnifying-glass"></i>
          <input type="text" id="search-input" placeholder="Search name or department..." oninput="searchEmployees()"/>
        </div>
      </div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>EMP ID</th>
              <th>Full Name</th>
              <th>Email</th>
              <th>Department</th>
              <th>Designation</th>
              <th>Salary</th>
              <th>Type</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="employees-tbody">
            <tr><td colspan="9" class="empty-state"><i class="fa-solid fa-spinner fa-spin"></i><p>Loading...</p></td></tr>
          </tbody>
        </table>
      </div>
    </section>

  </div>

  <!-- EDIT MODAL -->
  <div id="edit-modal" class="modal-overlay" style="display:none">
    <div class="modal-box">
      <div class="modal-header">
        <h3><i class="fa-solid fa-pen-to-square" style="margin-right:8px;font-size:0.9rem;"></i>Edit Employee</h3>
        <button class="modal-close" onclick="closeModal()"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="form-grid">
        <input type="hidden" id="edit-id"/>
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" id="edit-fullName"/>
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="edit-email"/>
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input type="text" id="edit-phoneNumber"/>
        </div>
        <div class="form-group">
          <label>Department</label>
          <input type="text" id="edit-department"/>
        </div>
        <div class="form-group">
          <label>Designation</label>
          <input type="text" id="edit-designation"/>
        </div>
        <div class="form-group">
          <label>Salary</label>
          <input type="number" id="edit-salary"/>
        </div>
        <div class="form-group">
          <label>Employment Type</label>
          <select id="edit-employmentType">
            <option value="Full-time">Full-time</option>
            <option value="Part-time">Part-time</option>
            <option value="Contract">Contract</option>
          </select>
        </div>
        <div class="form-group">
          <label>Status</label>
          <select id="edit-status">
            <option value="Active">Active</option>
            <option value="Inactive">Inactive</option>
          </select>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn-primary" onclick="updateEmployee()">
          <i class="fa-solid fa-floppy-disk"></i> Save Changes
        </button>
        <button class="btn-secondary" onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>